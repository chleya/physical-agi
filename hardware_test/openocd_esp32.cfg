# OpenOCD ESP32 配置模板
# 文件: openocd_esp32.cfg
# 用途: ESP32 烧录与调试

# ============ 基础配置 ============
# 接口选择 (根据你的调试器选择)
# CMSIS-DAP
source [find interface/cmsis-dap.cfg]
# J-Link
# source [find interface/jlink.cfg]

# 传输方式
transport select swd

# ============ 目标芯片配置 ============
# ESP32
set CHIPNAME esp32
source [find target/esp32.cfg]

# ============ 适配器配置 ============
# ESP32 需要较慢的速度
adapter speed 2000

# ============ 复位配置 ============
# ESP32 复位控制
reset_config none separate

# ============ 启动配置 ============
# 不自动运行，等待命令
# 等效于: -c "halt"

# ============ 使用示例 ============
# 烧录
# openocd -f openocd_esp32.cfg -c "program_esp32 <地址> <文件> <文件类型> <烧录标志> verify reset exit"

# 常用地址:
# 0x1000        - bootloader
# 0x10000       - application
# 0x8000        - partition table
# 0x3ffb0000    - nvs_data

# 烧录命令示例:
# openocd -f openocd_esp32.cfg -c "program_esp32 0x1000 build/bootloader.bin bin 0x10000 build/app.bin bin 0x8000 build/partitions.bin bin verify reset exit"
